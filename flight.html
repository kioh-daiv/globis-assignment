<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>かんたん航空券予約体験</title>
  <link href="https://fonts.googleapis.com/css2?family=Kosugi+Maru&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Kosugi Maru', 'sans-serif';
      background: linear-gradient(120deg, #f8fafc 0%, #e0e7ef 100%);
      margin: 0;
      padding: 0;
      color: #222;
    }
    .container {
      max-width: 500px;
      margin: 32px auto;
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.08);
      padding: 28px 16px 32px 16px;
    }
    h1 {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 8px;
      letter-spacing: 0.05em;
      font-family: 'Kosugi Maru', 'sans-serif';
    }
    .step-title {
      text-align: center;
      font-size: 1.2rem;
      color: #1976d2;
      margin-bottom: 12px;
      font-weight: bold;
    }
    .form-group {
      margin-bottom: 16px;
    }
    label {
      display: block;
      margin-bottom: 4px;
      font-weight: bold;
    }
    input, select {
      width: 100%;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #b0bec5;
      font-size: 1rem;
      margin-bottom: 4px;
      box-sizing: border-box;
    }
    .option-group {
      margin-bottom: 12px;
      padding: 10px 12px;
      background: #f3f6fa;
      border-radius: 8px;
    }
    .option-group label {
      font-weight: normal;
      margin-bottom: 0;
    }
    .btn {
      display: block;
      margin: 24px auto 0 auto;
      background: #1976d2;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 1.1rem;
      padding: 12px 32px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 2px 8px rgba(25, 118, 210, 0.08);
      transition: background 0.2s, transform 0.2s;
    }
    .btn:hover {
      background: #1565c0;
      transform: translateY(-2px) scale(1.04);
    }
    .btn-back {
      display: inline-block;
      margin: 16px 0 0 0;
      background: #b0bec5;
      color: #333;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      padding: 8px 24px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 2px 8px rgba(176, 190, 197, 0.08);
      transition: background 0.2s, transform 0.2s;
    }
    .btn-back:hover {
      background: #90a4ae;
      color: #fff;
    }
    .summary {
      background: #e3f2fd;
      border-radius: 10px;
      padding: 14px 18px;
      margin: 18px 0 0 0;
      font-size: 1.05rem;
      color: #1976d2;
      text-align: left;
      box-shadow: 0 2px 8px rgba(25, 118, 210, 0.04);
    }
    .done {
      text-align: center;
      font-size: 1.3rem;
      color: #388e3c;
      font-weight: bold;
      margin: 24px 0 10px 0;
    }
    .small-link {
      display: block;
      text-align: center;
      margin-top: 18px;
      color: #1976d2;
      text-decoration: underline;
      cursor: pointer;
      font-size: 0.98em;
    }
    .login-info {
      text-align: right;
      color: #1976d2;
      font-size: 0.98em;
      margin-bottom: 8px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>かんたん航空券予約体験</h1>
    <div id="main"></div>
  </div>
  <script>
    let step = 0; // 0:login, 1:search, 2:result, 3:info, 4:option, 5:pay, 6:confirm, 7:done
    let loggedIn = false;
    let loginUser = '';
    let data = {
      from: '', to: '', date: '', people: 1, promo: '',
      flight: '',
      name: '', birth: '', email: '', passport: '',
      seat: '',
      baggage: false, insurance: false, meal: false, support: false,
      card: '',
    };
    const flights = [
      { id: 'FJ101', from: '東京', to: '大阪', time: '09:00-10:30', price: 12000 },
      { id: 'FJ202', from: '東京', to: '札幌', time: '13:00-15:00', price: 18000 },
      { id: 'FJ303', from: '大阪', to: '福岡', time: '16:00-17:30', price: 11000 },
    ];
    const seats = ['A席（窓側）', 'B席（中央）', 'C席（通路側）', '指定しない'];
    function render() {
      const main = document.getElementById('main');
      main.innerHTML = '';
      if (!loggedIn) {
        // ログイン画面
        main.innerHTML = `
          <div class="step-title">ログイン</div>
          <form id="login-form">
            <div class="form-group">
              <label>ユーザー名</label>
              <input type="text" name="user" required>
            </div>
            <div class="form-group">
              <label>パスワード</label>
              <input type="password" name="pass" required>
            </div>
            <button class="btn" type="submit">ログイン</button>
          </form>
        `;
        document.getElementById('login-form').onsubmit = e => {
          e.preventDefault();
          const fd = new FormData(e.target);
          loginUser = fd.get('user');
          loggedIn = true;
          step = 1;
          render();
        };
        return;
      }
      // ログイン済み表示
      main.innerHTML += `<div class="login-info">ようこそ、${loginUser}さん</div>`;
      if (step === 1) {
        main.innerHTML += `
          <div class="step-title">フライト検索</div>
          <form id="search-form">
            <div class="form-group">
              <label>出発地</label>
              <select name="from" required>
                <option value="">選んでください</option>
                <option>東京</option><option>大阪</option><option>札幌</option><option>福岡</option>
              </select>
            </div>
            <div class="form-group">
              <label>到着地</label>
              <select name="to" required>
                <option value="">選んでください</option>
                <option>東京</option><option>大阪</option><option>札幌</option><option>福岡</option>
              </select>
            </div>
            <div class="form-group">
              <label>出発日</label>
              <input type="date" name="date" required>
            </div>
            <div class="form-group">
              <label>人数</label>
              <input type="number" name="people" min="1" max="6" value="1" required>
            </div>
            <div class="form-group">
              <label>プロモーションコード <span style="color:#888;font-weight:normal;">（あれば）</span></label>
              <input type="text" name="promo">
            </div>
            <button class="btn" type="submit">検索</button>
          </form>
        `;
        if (step > 1) main.innerHTML += `<button class="btn-back" onclick="step--;render()">戻る</button>`;
        document.getElementById('search-form').onsubmit = e => {
          e.preventDefault();
          const fd = new FormData(e.target);
          data.from = fd.get('from');
          data.to = fd.get('to');
          data.date = fd.get('date');
          data.people = fd.get('people');
          data.promo = fd.get('promo');
          step = 2;
          render();
        };
      } else if (step === 2) {
        // 検索結果
        const results = flights.filter(f => f.from === data.from && f.to === data.to);
        main.innerHTML += `<div class="step-title">検索結果一覧</div>`;
        if (results.length === 0) {
          main.innerHTML += `<div>ご希望の区間の便はありません。<br><span class="small-link" onclick="step=1;render()">検索に戻る</span></div>`;
          return;
        }
        main.innerHTML += results.map(f => `
          <div class="option-group">
            <label><input type="radio" name="flight" value="${f.id}"> ${f.id} (${f.from}→${f.to}) ${f.time}　￥${f.price.toLocaleString()}</label>
          </div>
        `).join('');
        main.innerHTML += `<button class="btn" id="select-flight">この便で進む</button>`;
        main.innerHTML += `<button class="btn-back" onclick="step--;render()">戻る</button>`;
        document.getElementById('select-flight').onclick = () => {
          const val = document.querySelector('input[name=flight]:checked');
          if (!val) { alert('便を選んでください'); return; }
          data.flight = val.value;
          step = 3;
          render();
        };
      } else if (step === 3) {
        // 搭乗者情報
        main.innerHTML += `
          <div class="step-title">搭乗者情報入力</div>
          <form id="info-form">
            <div class="form-group">
              <label>お名前</label>
              <input type="text" name="name" required>
            </div>
            <div class="form-group">
              <label>生年月日</label>
              <input type="date" name="birth" required>
            </div>
            <div class="form-group">
              <label>メールアドレス</label>
              <input type="email" name="email" required>
            </div>
            <div class="form-group">
              <label>パスポート番号 <span style="color:#888;font-weight:normal;">（国際線の場合）</span></label>
              <input type="text" name="passport">
            </div>
            <button class="btn" type="submit">次へ</button>
          </form>
          <button class="btn-back" onclick="step--;render()">戻る</button>
        `;
        document.getElementById('info-form').onsubmit = e => {
          e.preventDefault();
          const fd = new FormData(e.target);
          data.name = fd.get('name');
          data.birth = fd.get('birth');
          data.email = fd.get('email');
          data.passport = fd.get('passport');
          step = 4;
          render();
        };
      } else if (step === 4) {
        // 座席指定・オプション
        main.innerHTML += `
          <div class="step-title">座席指定・オプション選択</div>
          <form id="option-form">
            <div class="form-group">
              <label>座席指定</label>
              <select name="seat">
                <option>指定しない</option>
                <option>A席（窓側）</option>
                <option>B席（中央）</option>
                <option>C席（通路側）</option>
              </select>
            </div>
            <div class="option-group">
              <label><input type="checkbox" name="baggage"> 追加手荷物（+￥2,000）</label><br>
              <label><input type="checkbox" name="insurance"> 旅行保険（+￥1,000）</label><br>
              <label><input type="checkbox" name="meal"> 機内食（+￥1,500）</label><br>
              <label><input type="checkbox" name="support"> 特別サポート（車椅子・アレルギー等）</label>
            </div>
            <button class="btn" type="submit">次へ</button>
          </form>
          <button class="btn-back" onclick="step--;render()">戻る</button>
        `;
        document.getElementById('option-form').onsubmit = e => {
          e.preventDefault();
          const fd = new FormData(e.target);
          data.seat = fd.get('seat');
          data.baggage = !!fd.get('baggage');
          data.insurance = !!fd.get('insurance');
          data.meal = !!fd.get('meal');
          data.support = !!fd.get('support');
          step = 5;
          render();
        };
      } else if (step === 5) {
        // 支払い
        main.innerHTML += `
          <div class="step-title">支払い情報入力</div>
          <form id="pay-form">
            <div class="form-group">
              <label>クレジットカード番号</label>
              <input type="text" name="card" maxlength="16" required pattern="[0-9]{16}">
            </div>
            <button class="btn" type="submit">次へ</button>
          </form>
          <button class="btn-back" onclick="step--;render()">戻る</button>
        `;
        document.getElementById('pay-form').onsubmit = e => {
          e.preventDefault();
          const fd = new FormData(e.target);
          data.card = fd.get('card');
          step = 6;
          render();
        };
      } else if (step === 6) {
        // 確認
        const flight = flights.find(f => f.id === data.flight);
        let total = flight ? flight.price : 0;
        if (data.baggage) total += 2000;
        if (data.insurance) total += 1000;
        if (data.meal) total += 1500;
        main.innerHTML += `
          <div class="step-title">予約内容確認</div>
          <div class="summary">
            <b>便：</b> ${flight ? `${flight.id} (${flight.from}→${flight.to}) ${flight.time}` : ''}<br>
            <b>出発日：</b> ${data.date}<br>
            <b>人数：</b> ${data.people}<br>
            <b>お名前：</b> ${data.name}<br>
            <b>座席：</b> ${data.seat}<br>
            <b>オプション：</b> ${[data.baggage ? '手荷物' : '', data.insurance ? '保険' : '', data.meal ? '機内食' : '', data.support ? '特別サポート' : ''].filter(Boolean).join('・') || 'なし'}<br>
            <b>合計金額：</b> ￥${total.toLocaleString()}
          </div>
          <button class="btn" id="confirm-btn">この内容で予約</button>
          <button class="btn-back" onclick="step--;render()">戻る</button>
        `;
        document.getElementById('confirm-btn').onclick = () => {
          step = 7;
          render();
        };
      } else if (step === 7) {
        // 完了
        main.innerHTML += `
          <div class="done">予約が完了しました！</div>
          <div class="summary">
            予約番号：FJ${Math.floor(100000 + Math.random()*900000)}<br>
            ご登録のメールアドレスに確認メールを送りました。<br>
            <span style="color:#1976d2;">ご利用ありがとうございました！</span>
          </div>
          <span class="small-link" onclick="step=1;render()">トップに戻る</span>
          <span class="small-link" onclick="loggedIn=false;loginUser='';step=0;render()">ログアウト</span>
        `;
      }
    }
    render();
  </script>
</body>
</html> 